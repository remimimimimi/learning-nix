#+Title: Module anatomy
#+SETUPFILE: ../../reveal.setup


   
** Module patterns

\\

   When creating a module, alias the local option scope in a
   ~let...in~.

   #+BEGIN_SRC nix
     { config, lib, ... }:

     let cfg = config.foo.bar.my-module;
     in
     with lib;
     {
       options.foo.bar.my-module = {
         # ...
       };

       config = mkIf cfg.enable {
         # ...
       }
     }
   #+END_SRC

** Module patterns

\\

   If your configuration block is too complex, consider moving it to a
   different file.

   #+BEGIN_SRC nix
     { config, lib, ... } @ args:

     with lib;
     {
       options.foo.bar.my-module = {
         # ...
       };
  
       config = (import ./config.nix args);
     }
   #+END_SRC
